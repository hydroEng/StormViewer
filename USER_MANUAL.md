# What is the TUFLOW Ensemble tool?

This is a little tool written in Python that calculates the critical storm for a TUFLOW ensemble simulation as per the ARR2016 guidelines ([read here for more information](https://wiki.tuflow.com/index.php?title=ARR_2016_Ensembles_Processing)). The tool looks at flow volumes generated at PO Lines (these files are named in the pattern \*_PO.csv and are generated by TUFLOW.) 

The outputs of the tool are:

1. A results file ("results.txt") that displays the critical duration and temporal pattern for each event and PO line in your model;
2. A box plot for each storm event and PO Line processed, and;
3. A log file ("log.txt") that shows intervening calculations.


# How do I use it?

Simply choose the folder containing the PO line CSV results files as the input directory, and choose the output folder to generate your graphs and results. Click run.

Critical storms/temporal patterns for each PO line and event will be listed in the results.txt file generated in your output folder. Here are example outputs:

<img src="https://raw.githubusercontent.com/hydroEng/tuflow_ensemble/master/src/tuflow_ensemble/assets/sample_results.png" alt="Sample results">

Here is a sample graph generated by using the tool on a 100Y storm event run for multiple durations:
<img src="https://raw.githubusercontent.com/hydroEng/tuflow_ensemble/master/src/tuflow_ensemble/assets/100.0y-%20Max%20Flow%20Location1.png" alt="Sample plot" width="50%" height="50%">

### A note on filename conventions

This tool parses the filename of your \*_PO.csv files to interpret storm event / duration / temporal pattern. As such, your csv files should be named so that your storm event, duration and temporal pattern are separated by underscores. This tool looks for the following (NOT case sensitive):

1. Storm Event is the text between the first and second underscores in your filename.
2. Duration is the number(s) preceding "m_" in your filename
3. Temporal Pattern is the number(s) after the string "tp" in your filename.

As such, a po line CSV result named "Example-Catchment_0.5EY_360m_tp07_no-blockages_001_PO.csv" would be understood to be Event 0.5EY, Duration 360 minutes and Temporal Pattern 7.

